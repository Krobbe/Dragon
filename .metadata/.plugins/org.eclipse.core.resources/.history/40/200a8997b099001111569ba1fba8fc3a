package client.ctrl.game;

import model.game.Pot;
import model.player.Bet;
import model.player.iPlayer;
import client.event.Event;
import client.event.EventHandler;
import client.event.EventBus;
import model.game.Table;

/**
 * This class contains methods that handles the application during game mode.
 * 
 * @author mattiashenriksson
 * @author robinandersson
 * 
 */

public class GameController {

	Table table;
	
	public GameController() {
		table = new Table();
	}
	
	public GameController(Table table) {
		this.table = table;
	}
	
	public void setPot(Pot pot) {
		table.getRound().getPot().setValue(pot.getValue());
	}
	
	public boolean fold(iPlayer player) {
		if(!table.getCurrentPlayer().equals(player)) {
			return false;
		} 
		iPlayer p = table.getCurrentPlayer();
		p.getHand().discard();
		p.setActive(false);
		p.setDoneFirstTurn(true);
		return true;
	}
	
	public boolean makeBet(Bet bet) {
		if(!table.getCurrentPlayer().equals(bet.getOwner())) {
			return false;
		}
		iPlayer p = table.getCurrentPlayer();
		int tmp = bet.getValue() - p.getOwnCurrentBet();
		p.getBalance().removeFromBalance(tmp);
		p.setOwnCurrentBet(bet.getValue());
		table.getRound().getBettingRound().setCurrentBet(bet);
		return true;
	}
		
}




