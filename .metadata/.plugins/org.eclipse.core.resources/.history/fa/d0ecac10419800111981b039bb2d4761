package view.menu;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Map;

import javax.swing.JPanel;

import model.player.Account;
import model.player.Player;

import database.*;

import event.Event;
import event.EventBus;
import event.EventHandler;

@SuppressWarnings("serial")
public class StatisticsPanel extends JPanel implements EventHandler, IDBGame {
	DatabaseCommunicator dbc = DatabaseCommunicator.getInstance();
	
	
	public StatisticsPanel() {
		init();
		EventBus.register(this);
	}

	@Override
	public void onEvent(Event evt) {
		// TODO Auto-generated method stub
		
	}
	
	private void init() {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void saveGame(String gameID, String date) {
		throw new UnsupportedOperationException();
	}

	@Override
	public void savePlacement(String gameID, Player player, int placement) {
		throw new UnsupportedOperationException();
	}

	@Override
	public Map<Integer, String> loadGamePlacements(String gameID) {
		Connection conn = dbc.getConnection();
		Statement myStmt;
		try {
			myStmt = conn.createStatement();
			ResultSet rs =
			myStmt.executeQuery("SELECT * FROM Accounts WHERE userName = '" 
			+ accountName + "'");
			if (rs.next()) {
				// Accountinformation
				String firstName = rs.getString(2);
				String lastName = rs.getString(3);
				String passWord = rs.getString(4);
				String balance = rs.getString(5);
				int x = Integer.parseInt(balance);

				Account a = new Account(firstName, lastName, accountName, passWord);
				a.getBalance().addToBalance(x);
				return a;
			}
		} catch (SQLException e) {
			System.out.println(e.getMessage());
			e.printStackTrace();
		}
		return null;
	}
}
